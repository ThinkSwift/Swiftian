<p align="center" style="position: relative;">
  <video id="pageVideo"
    loop
    playsinline
    preload="metadata"
    style="
      width: 100vw;
      object-fit: contain;
      background: #000;
      cursor: pointer;
      display: block;
      margin: auto;
      border-radius: 1em;
      box-shadow: 0 4px 20px rgba(0,0,0,0.12);
      aspect-ratio: auto;
    ">
    <source id="videoSource" src="/assets/videos/chillfriends.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <button id="playBtn" type="button" aria-label="Play"
    style="position: absolute; left: 50%; top: 50%; transform: translate(-50%,-50%); font-size: 3rem; background: rgba(255,255,255,0.7); border: none; border-radius: 50%; cursor: pointer; z-index: 2; width: 2.6em; height: 2.6em; display: flex; align-items: center; justify-content: center;">
    <span id="playIcon">&#9654;</span>
  </button>
  <button id="videoPrevBtn" type="button" aria-label="Previous Video"
    style="position: absolute; left: 4px; top: 50%; transform: translateY(-50%); font-size: 2rem; background: rgba(255,255,255,0.7); border: none; border-radius: 50%; cursor: pointer; z-index: 1; width: 2.2em; height: 2.2em; display: flex; align-items: center; justify-content: center;">&#8592;</button>
  <button id="videoNextBtn" type="button" aria-label="Next Video"
    style="position: absolute; right: 4px; top: 50%; transform: translateY(-50%); font-size: 2rem; background: rgba(255,255,255,0.7); border: none; border-radius: 50%; cursor: pointer; z-index: 1; width: 2.2em; height: 2.2em; display: flex; align-items: center; justify-content: center;">&#8594;</button>
</p>
<script>
  // 영상 목록 및 비율 정보
  const videoList = [
    {src: "/assets/videos/chillfriends.mp4", aspect: "9/16", vertical: true},
    {src: "/assets/videos/logo.mp4", aspect: "16/9", vertical: false}
  ];
  let currentVideo = 0;
  let playMode = false; // false: 멈춤/대기모드, true: 플레이모드 (화살표 이동에도 유지)

  // 요소 참조
  const video = document.getElementById("pageVideo");
  const videoSource = document.getElementById("videoSource");
  const btnPrev = document.getElementById("videoPrevBtn");
  const btnNext = document.getElementById("videoNextBtn");
  const playBtn = document.getElementById("playBtn");

  // 반응형 크기
  function adjustVideoSize() {
    const { vertical } = videoList[currentVideo];
    if (window.innerWidth < 500) {
      video.style.maxWidth = vertical ? "80vw" : "94vw";
      video.style.maxHeight = "38vh";
    } else {
      video.style.maxWidth = vertical ? "210px" : "420px";
      video.style.maxHeight = vertical ? "35vh" : "70vh";
    }
  }
  window.addEventListener("resize", adjustVideoSize);

  // 비디오/슬라이드 초기화 및 상태 적용
  function updateVideo() {
    videoSource.src = videoList[currentVideo].src;
    video.style.aspectRatio = videoList[currentVideo].aspect;
    video.load();
    adjustVideoSize();
    if (playMode) {
      playVideoWithSound();
    } else {
      pauseAndMuteVideo();
    }
  }

  // 재생(소리ON)
  function playVideoWithSound() {
    video.muted = false;
    video.play().catch(() => {});
    playBtn.style.display = "none";
  }
  // 일시정지(소리OFF, 버튼 보임)
  function pauseAndMuteVideo() {
    video.pause();
    video.muted = true;
    playBtn.style.display = "";
  }

  // 화살표
  btnPrev.addEventListener("click", function() {
    currentVideo = (currentVideo - 1 + videoList.length) % videoList.length;
    updateVideo();
  });
  btnNext.addEventListener("click", function() {
    currentVideo = (currentVideo + 1) % videoList.length;
    updateVideo();
  });

  // 플레이 버튼: 이제 "플레이모드"가 되어 화살표로 넘겨도 계속 자동재생!
  playBtn.addEventListener("click", function() {
    playMode = true;
    playVideoWithSound();
  });

  // 영상 클릭시 플레이모드 해제(멈춤+음소거+버튼 표시)
  video.addEventListener("click", function() {
    if (playMode && playBtn.style.display === "none") {
      playMode = false;
      pauseAndMuteVideo();
    }
  });

  // 루프
  video.addEventListener("ended", function() {
    if (playMode) {
      video.currentTime = 0;
      video.play().catch(() => {});
    }
  });

  // 최초 로딩
  document.addEventListener("DOMContentLoaded", function() {
    playMode = false;
    updateVideo();
  });
</script>
